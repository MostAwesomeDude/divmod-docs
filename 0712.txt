
This is work in progress. Don't read it, yet!

=== Create Skeleton ===

{{{
axiomatic project -n blog
cd blog
axiomatic -d blogtut.axiom mantissa
}}}

=== Add Public Page ===

{{{
appPowerups = (
    blog_model.BlogStart,
    blog_model.BlogPublicPage,
)
}}}

{{{
<div xmlns='http://www.w3.org/1999/xhtml'
     xmlns:nevow='http://nevow.com/ns/nevow/0.1'>
	<h1>Blog Test</h1>
</div>
}}}

{{{
from nevow import loaders, inevow
from nevow.rend import Page

class BlogPublicView(Page):

    docFactory = loaders.xmlfile('blog/themes/base/blog-public.html')

    def __init__(self, original):
        Page.__init__(self)
        self.original = original

    def customizeFor(self, avatar):
        return self
}}}

{{{
class BlogPublicPage(Item, InstallableMixin):
    # This object can be browsed from the web
    # From the mantissa perspective this is the model in the MVC pattern
    implements(ixmantissa.IPublicPage)

    schemaVersion = 1                  # First version of this object.
    typeName = 'blog_public_page'      # Database table name.

    name = text()               # We must have at least one attribute - model
                                # objects must store data.
    installedOn = reference()

    def installOn(self, other):
        super(BlogPublicPage, self).installOn(other)
        other.powerUp(self, ixmantissa.IPublicPage)

    def getResource(self):
        from blog.blog_view import BlogPublicView
        return BlogPublicView(self)
}}}

=== Install Offering ===

=== Allow admin to View !BlogStart ===

REPL:
{{{
from blog.blog_model import BlogStart
BlogStart(store=s).installOn(s)
}}}